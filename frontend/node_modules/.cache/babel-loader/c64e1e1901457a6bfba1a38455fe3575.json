{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\User\\\\Desktop\\\\uni\\\\IMSE2022PROJECT\\\\IMSE2022\\\\frontend\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import React,{useState,useEffect}from\"react\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function TransactionsList(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),transaction=_useState2[0],setTransaction=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),changedExpenseType=_useState4[0],setChangedExpenseType=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),transactions=_useState6[0],setTransactions=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),customers=_useState8[0],setCustomers=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),expenseTypes=_useState10[0],setExpenseTypes=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),transactionTypes=_useState12[0],setTransactionTypes=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),edit_id=_useState14[0],setEditID=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),currentExpenseType=_useState16[0],setCurrentExpenseType=_useState16[1];var fetch=function fetch(){axios.get(\"http://localhost:8000/transaction/\").then(function(result){return setTransactions(result.data);}).catch(function(error){return console.log(\"Error\",error);});};useEffect(function(){fetch();axios.get(\"http://localhost:8000/expense-type/\").then(function(result){return setExpenseTypes(result.data);}).catch(function(error){return console.log(\"Error\",error);});axios.get(\"http://localhost:8000/transaction-type/\").then(function(result){return setTransactionTypes(result.data);}).catch(function(error){return console.log(\"Error\",error);});axios.get(\"http://localhost:8000/customer/\").then(function(result){return setCustomers(result.data);}).catch(function(error){return console.log(\"Error\",error);});},[]);var put_transaction=function put_transaction(){transaction.expense_type=changedExpenseType;console.log(transaction);axios.put(\"http://localhost:8000/transaction/\".concat(transaction.id,\"/\"),transaction).then(function(result){return fetch();}).catch(function(error){return console.log(\"Error\",error);});fetch();};return/*#__PURE__*/_jsx(\"div\",{class:\"overflow-auto lg:overflow-visible flex items-center justify-center min-h-screen col-span-12 bg-indigo-300\",children:/*#__PURE__*/_jsxs(\"table\",{class:\"table text-gray-800 border-separate space-y-6 text-sm\",children:[/*#__PURE__*/_jsx(\"thead\",{class:\"bg-indigo-200 text-gray-900\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{class:\"p-3 text-left\",children:\"To\"}),/*#__PURE__*/_jsx(\"th\",{class:\"p-3 text-left\",children:\"Transaction Type\"}),/*#__PURE__*/_jsx(\"th\",{class:\"p-3 text-left\",children:\"Amount\"}),/*#__PURE__*/_jsx(\"th\",{class:\"p-3 text-left\",children:\"Expense Category\"}),/*#__PURE__*/_jsx(\"th\",{class:\"p-3 text-left\",children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:transactions===null||transactions===void 0?void 0:transactions.map(function(item){var cust=customers===null||customers===void 0?void 0:customers.find(function(c){return c.id===item.receiver_account;});var ttype=transactionTypes===null||transactionTypes===void 0?void 0:transactionTypes.find(function(t){return t.id===item.transaction_type;});var etype=expenseTypes===null||expenseTypes===void 0?void 0:expenseTypes.find(function(e){return e.id===item.expense_type;});return/*#__PURE__*/_jsxs(\"tr\",{class:\"bg-indigo-200\",children:[/*#__PURE__*/_jsx(\"td\",{class:\"p-3\",children:/*#__PURE__*/_jsx(\"div\",{class:\"flex align-items-center\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"ml-3\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"\",children:cust?/*#__PURE__*/_jsxs(\"div\",{children:[cust.firstname,\" \",cust.lastname]}):/*#__PURE__*/_jsx(\"div\",{children:\"no Data\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"text-gray-500\"}),/*#__PURE__*/_jsx(\"div\",{class:\"text-gray-500\",children:item.payment_reference})]})})}),ttype?/*#__PURE__*/_jsx(\"td\",{class:\"p-3\",children:ttype.description}):/*#__PURE__*/_jsx(\"td\",{class:\"p-3\",children:\"No data\"}),/*#__PURE__*/_jsxs(\"td\",{class:\"p-3 font-bold\",children:[item.amount,\" \\u20AC\"]}),/*#__PURE__*/_jsx(\"td\",{class:\"p-3\",children:etype?/*#__PURE__*/_jsx(\"div\",{children:item.id===edit_id?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"select\",{className:\"bg-indigo-600 text-gray-50 rounded-md px-2\",required:true,name:\"expensetype\",id:\"expensetype\",value:currentExpenseType,onChange:function onChange(e){setChangedExpenseType(e.target.value);setTransaction(item);setCurrentExpenseType(e.target.value);},children:expenseTypes===null||expenseTypes===void 0?void 0:expenseTypes.map(function(element){return/*#__PURE__*/_jsx(\"option\",{value:element.id,children:element.description});})})}):/*#__PURE__*/_jsx(\"span\",{class:\"bg-indigo-600 text-gray-50 rounded-md px-2\",children:etype.description})}):/*#__PURE__*/_jsx(\"span\",{class:\"bg-green-400 text-gray-50 rounded-md px-2\",children:\"no Data\"})}),/*#__PURE__*/_jsx(\"td\",{class:\"p-3 \",children:/*#__PURE__*/_jsx(\"a\",{href:\"#\",class:\"text-gray-500 hover:text-gray-100  mx-2\",children:item.id===edit_id?/*#__PURE__*/_jsx(\"button\",{class:\"material-icons-outlined text-base\",onClick:function onClick(){put_transaction();setEditID(0);},children:\"Save\"}):/*#__PURE__*/_jsx(\"button\",{class:\"material-icons-outlined text-base\",onClick:function onClick(){setEditID(item.id);setCurrentExpenseType(item.expense_type);},children:\"Edit\"})})})]},item.id);})})]})});}export default TransactionsList;","map":{"version":3,"sources":["C:/Users/User/Desktop/uni/IMSE2022PROJECT/IMSE2022/frontend/src/Components/TransactionsList.jsx"],"names":["React","useState","useEffect","axios","TransactionsList","transaction","setTransaction","changedExpenseType","setChangedExpenseType","transactions","setTransactions","customers","setCustomers","expenseTypes","setExpenseTypes","transactionTypes","setTransactionTypes","edit_id","setEditID","currentExpenseType","setCurrentExpenseType","fetch","get","then","result","data","catch","error","console","log","put_transaction","expense_type","put","id","map","item","cust","find","c","receiver_account","ttype","t","transaction_type","etype","e","firstname","lastname","payment_reference","description","amount","target","value","element"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction TransactionsList() {\r\n  const [transaction, setTransaction] = useState({});\r\n  const [changedExpenseType, setChangedExpenseType] = useState();\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [customers, setCustomers] = useState([]);\r\n  const [expenseTypes, setExpenseTypes] = useState([]);\r\n  const [transactionTypes, setTransactionTypes] = useState([]);\r\n  const [edit_id, setEditID] = useState(\"\");\r\n  const [currentExpenseType, setCurrentExpenseType] = useState(\"\");\r\n\r\n  const fetch = () => {\r\n    axios\r\n      .get(`http://localhost:8000/transaction/`)\r\n      .then((result) => setTransactions(result.data))\r\n      .catch((error) => console.log(\"Error\", error));\r\n  };\r\n  useEffect(() => {\r\n    fetch();\r\n    axios\r\n      .get(`http://localhost:8000/expense-type/`)\r\n      .then((result) => setExpenseTypes(result.data))\r\n      .catch((error) => console.log(\"Error\", error));\r\n\r\n    axios\r\n      .get(`http://localhost:8000/transaction-type/`)\r\n      .then((result) => setTransactionTypes(result.data))\r\n      .catch((error) => console.log(\"Error\", error));\r\n\r\n    axios\r\n      .get(`http://localhost:8000/customer/`)\r\n      .then((result) => setCustomers(result.data))\r\n      .catch((error) => console.log(\"Error\", error));\r\n  }, []);\r\n\r\n  const put_transaction = () => {\r\n    transaction.expense_type = changedExpenseType;\r\n    console.log(transaction);\r\n    axios\r\n      .put(`http://localhost:8000/transaction/${transaction.id}/`, transaction)\r\n      .then((result) => fetch())\r\n      .catch((error) => console.log(\"Error\", error));\r\n    fetch();\r\n  };\r\n  return (\r\n    <div class=\"overflow-auto lg:overflow-visible flex items-center justify-center min-h-screen col-span-12 bg-indigo-300\">\r\n      <table class=\"table text-gray-800 border-separate space-y-6 text-sm\">\r\n        <thead class=\"bg-indigo-200 text-gray-900\">\r\n          <tr>\r\n            <th class=\"p-3 text-left\">To</th>\r\n            <th class=\"p-3 text-left\">Transaction Type</th>\r\n            <th class=\"p-3 text-left\">Amount</th>\r\n            <th class=\"p-3 text-left\">Expense Category</th>\r\n            <th class=\"p-3 text-left\">Action</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {transactions?.map((item) => {\r\n            const cust = customers?.find((c) => c.id === item.receiver_account);\r\n            const ttype = transactionTypes?.find(\r\n              (t) => t.id === item.transaction_type\r\n            );\r\n\r\n            const etype = expenseTypes?.find((e) => e.id === item.expense_type);\r\n            return (\r\n              <tr key={item.id} class=\"bg-indigo-200\">\r\n                <td class=\"p-3\">\r\n                  <div class=\"flex align-items-center\">\r\n                    <div class=\"ml-3\">\r\n                      <div class=\"\">\r\n                        {cust ? (\r\n                          <div>\r\n                            {cust.firstname} {cust.lastname}\r\n                          </div>\r\n                        ) : (\r\n                          <div>no Data</div>\r\n                        )}\r\n                      </div>\r\n                      <div class=\"text-gray-500\"></div>\r\n                      <div class=\"text-gray-500\">{item.payment_reference}</div>\r\n                    </div>\r\n                  </div>\r\n                </td>\r\n\r\n                {ttype ? (\r\n                  <td class=\"p-3\">{ttype.description}</td>\r\n                ) : (\r\n                  <td class=\"p-3\">No data</td>\r\n                )}\r\n                <td class=\"p-3 font-bold\">{item.amount} €</td>\r\n                <td class=\"p-3\">\r\n                  {etype ? (\r\n                    <div>\r\n                      {item.id === edit_id ? (\r\n                        <div>\r\n                          <select\r\n                            className=\"bg-indigo-600 text-gray-50 rounded-md px-2\"\r\n                            required\r\n                            name=\"expensetype\"\r\n                            id=\"expensetype\"\r\n                            value={currentExpenseType}\r\n                            onChange={(e) => {\r\n                              setChangedExpenseType(e.target.value);\r\n                              setTransaction(item);\r\n                              setCurrentExpenseType(e.target.value);\r\n                            }}\r\n                          >\r\n                            {expenseTypes?.map((element) => {\r\n                              return (\r\n                                <option value={element.id}>\r\n                                  {element.description}\r\n                                </option>\r\n                              );\r\n                            })}\r\n                          </select>\r\n                        </div>\r\n                      ) : (\r\n                        <span class=\"bg-indigo-600 text-gray-50 rounded-md px-2\">\r\n                          {etype.description}\r\n                        </span>\r\n                      )}\r\n                    </div>\r\n                  ) : (\r\n                    <span class=\"bg-green-400 text-gray-50 rounded-md px-2\">\r\n                      no Data\r\n                    </span>\r\n                  )}\r\n                </td>\r\n                <td class=\"p-3 \">\r\n                  <a href=\"#\" class=\"text-gray-500 hover:text-gray-100  mx-2\">\r\n                    {item.id === edit_id ? (\r\n                      <button\r\n                        class=\"material-icons-outlined text-base\"\r\n                        onClick={() => {\r\n                          put_transaction();\r\n                          setEditID(0);\r\n                        }}\r\n                      >\r\n                        Save\r\n                      </button>\r\n                    ) : (\r\n                      <button\r\n                        class=\"material-icons-outlined text-base\"\r\n                        onClick={() => {\r\n                          setEditID(item.id);\r\n                          setCurrentExpenseType(item.expense_type);\r\n                        }}\r\n                      >\r\n                        Edit\r\n                      </button>\r\n                    )}\r\n                  </a>\r\n                </td>\r\n              </tr>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default TransactionsList;\r\n"]},"metadata":{},"sourceType":"module"}